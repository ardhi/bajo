<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Tutorial: User Guide</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="light"><div class="sidebar-container"><div class="sidebar" id="sidebar"><a href="/" class="sidebar-title sidebar-title-anchor">Bajo Framework</a><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-tutorials"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-00-welcome.html">Welcome</a></div><div class="sidebar-section-children"><a href="tutorial-01-getting-started.html">Getting Started</a></div><div class="sidebar-section-children"><a href="tutorial-02-user-guide.html">User Guide</a></div><div class="sidebar-section-children"><a href="tutorial-03-dev-guide.html">Developer Guide</a></div><div class="sidebar-section-children"><a href="tutorial-04-config.html">Config Object</a></div><div class="sidebar-section-children"><a href="tutorial-05-ecosystem.html">Ecosystem</a></div><div class="sidebar-section-children"><a href="tutorial-06-donations.html">Donations</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="App.html">App</a></div><div class="sidebar-section-children"><a href="Bajo.html">Bajo</a></div><div class="sidebar-section-children"><a href="Base.html">Base</a></div><div class="sidebar-section-children"><a href="Err.html">Err</a></div><div class="sidebar-section-children"><a href="Log.html">Log</a></div><div class="sidebar-section-children"><a href="Plugin.html">Plugin</a></div><div class="sidebar-section-children"><a href="Print.html">Print</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-events"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#event:bajo:afterAll%257Bmethod%257D">bajo:afterAll{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterBootComplete">bajo:afterBootComplete</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterBuildCollection">bajo:afterBuildCollection</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterCollectHooks">bajo:afterCollectHooks</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:beforeAll%257Bmethod%257D">bajo:beforeAll{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:beforeBuildCollection">bajo:beforeBuildCollection</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:afterAppletRun">{ns}:afterAppletRun</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:after%257Bmethod%257D">{ns}:after{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:beforeAppletRun">{ns}:beforeAppletRun</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:before%257Bmethod%257D">{ns}:before{method}</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-Helper_Bajo.html">Helper/Bajo</a></div><div class="sidebar-section-children"><a href="module-Helper_Base.html">Helper/Base</a></div><div class="sidebar-section-children"><a href="module-Lib.html">Lib</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#TAppConfigHandler">TAppConfigHandler</a></div><div class="sidebar-section-children"><a href="global.html#TAppEnv">TAppEnv</a></div><div class="sidebar-section-children"><a href="global.html#TAppLib">TAppLib</a></div><div class="sidebar-section-children"><a href="global.html#TBajoDataType">TBajoDataType</a></div><div class="sidebar-section-children"><a href="global.html#TBajoFormatResult">TBajoFormatResult</a></div><div class="sidebar-section-children"><a href="global.html#TBajoFormatType">TBajoFormatType</a></div><div class="sidebar-section-children"><a href="global.html#TLogJson">TLogJson</a></div><div class="sidebar-section-children"><a href="global.html#TLogLevels">TLogLevels</a></div><div class="sidebar-section-children"><a href="global.html#TNsPathPairs">TNsPathPairs</a></div><div class="sidebar-section-children"><a href="global.html#TNsPathResult">TNsPathResult</a></div><div class="sidebar-section-children"><a href="global.html#TPrintOptions">TPrintOptions</a></div><div class="sidebar-section-children"><a href="global.html#boot">boot</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"><div class="navbar-item"><a id="" href="https://bajo.app" target="">Bajo.app</a></div><div class="navbar-item"><a id="" href="https://www.npmjs.com/package/bajo" target="">NPM</a></div><div class="navbar-item"><a id="" href="https://github.com/ardhi/bajo" target="">Github</a></div></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section><header><h2>User Guide</h2></header><article><h1 id="user-guide">User Guide</h1><h2 id="overview">Overview</h2><h3 id="definitions">Definitions</h3><p>Before we go any further, here are some of the terminologies I use throughout this documentation:</p><ul><li><code>{project-dir}</code>: The project directory is where you write all your code.</li><li><code>{data-dir}</code>: The data directory defaults to <code>{project-dir}/data</code> if not specifically stated. Bajo also creates this directory automatically if it doesn't already exist.</li><li><code>{tmp-dir}</code>: The temporary directory defaults to the OS temporary directory.</li><li><code>{pkgName}</code>: The plugin's package name, as it normally appears on an npm listing.</li><li><code>{ns}</code>: The plugin name or namespace, which is the camel-cased version of the package name.</li><li><code>{mainNs}</code>: The main namespace, a special plugin and directory named <code>main</code> located inside your <code>{project-dir}</code> where you should write all your code.</li></ul><h3 id="directory-structure">Directory Structure</h3><p>Your typical Bajo app directory structure should look like this:</p><pre class="prettyprint source"><code>|- {project-dir}
|  |- {data-dir}
|  |  |- config
|  |  |  |- .plugin
|  |  |  |- bajo.json
|  |  |  |- main.json
|  |  |  |- ...
|  |- main
|  |  |- extend
|  |  |- index.js
|  |  |  ...
|  |- package.json
|  |- index.js
|  |  ...
</code></pre><ul><li>You can move <code>{data-dir}</code> out of <code>{project-dir}</code> if you want, but you need to tell Bajo where to find it. For more on this, please follow along.</li><li><code>{data-dir}</code> should be the only place Bajo <strong>writes</strong> anything. Bajo and its plugins should <strong>never</strong> be allowed to write anything outside <code>{data-dir}</code> on their own.</li><li><code>config</code> is a special directory within <code>{data-dir}</code> where your configuration files should reside. Inside this directory, you should find:<ul><li>a special file named <code>.plugins</code> that tells Bajo which plugins should be loaded</li><li>a file named <code>bajo.json</code> to configure global settings</li><li>all plugin-specific config files, named after their namespace</li></ul></li><li>The <code>main</code> directory, or <code>{mainNs}</code> namespace, is the special plugin where you put your application code. And yes, it is actually a normal Bajo plugin! This means everything in there will be handled just like a regular plugin—it has the ability to extend other plugins, has its own config file, and more — with a few differences:<ul><li>it's always available and can't be disabled</li><li>it's always the last one to start</li><li>if this directory is missing, it will be created automatically on startup</li><li>if the plugin's factory function is missing (<code>index.js</code>), it will be created dynamically</li></ul></li><li><code>index.js</code> is the main entry point for your app.</li></ul><p>To set your <code>{data-dir}</code> somewhere else, you need to tell Bajo where to find it by using an argument switch.</p><p>Assuming your data directory is <code>my-data-dir</code> at the same level as your project directory, run your app like this:</p><pre class="prettyprint source lang-bash"><code>$ node index.js --dir-data=../my-data-dir
</code></pre><p>If using program arguments seems a bit like a hassle for you, just use Bajo's <a href="https://github.com/motdotla/dotenv">dotenv</a> support. Create a <code>.env</code> file in your project directory and put this inside:</p><pre class="prettyprint source lang-text"><code>DIR__DATA=../my-data-dir              # double underscores!!!
</code></pre><p>From now on, you can start the app just by typing:</p><pre class="prettyprint source lang-bash"><code>$ node index.js
</code></pre><h3 id="runtime">Runtime</h3><p>Bajo should run perfectly fine on Node.js version 20 or higher. Using the latest stable runtime is recommended. Bajo-based apps are also known to run with Bun without any problems.</p><p>Bajo is a pure ES6 framework that utilizes dynamic imports <code>a lot</code>. Running on a system with a fast disk (e.g., SSD) and enough RAM is highly recommended, especially when you load a lot of plugins.</p><h2 id="configuration">Configuration</h2><h3 id="general-rules">General Rules</h3><ul><li>All configuration files must be placed in the <code>{data-dir}/config</code> subfolder.</li><li>Config files must be named after their plugin namespace.</li><li>The file format should be either <code>.json</code> or <code>.js</code>. If a <code>.js</code> file is used, it must be in ES6 format and should export either a plain JavaScript object or a function. Both synchronous and asynchronous functions are supported. If it returns a function, this function will be called within its plugin scope and should return a plain JS object.</li><li>Other formats (<code>.yml</code>, <code>.yaml</code>, and <code>.toml</code>) can also be used by installing and loading the <a href="https://github.com/ardhi/bajo-config">bajoConfig</a> plugin.</li><li>Other formats (<code>.yml</code>, <code>.yaml</code> and <code>.toml</code>) can also be used by installing &amp; loading <a href="https://github.com/ardhi/bajo-config">bajoConfig</a> plugin</li><li>The order of precedence is <code>.js</code> &gt; <code>.json</code> &gt; <code>.yml</code> &gt; <code>.yaml</code> &gt; <code>.toml</code>. This means that if a .js file exists, it will be used instead of a .json file or any other format.</li></ul><p>Example: bajo.json</p><pre class="prettyprint source lang-json"><code>{
  &quot;env&quot;: &quot;prod&quot;,
  &quot;log&quot;: {
    &quot;pretty&quot;: true,
    &quot;timeTaken&quot;: true
  },
  &quot;lang&quot;: &quot;id&quot;
}
</code></pre><h3 id="using-plugins">Using Plugins</h3><p>Plugins are what make the Bajo Framework so great and flexible: they extend app features and functionalities!</p><p>To use plugins, follow these steps:</p><ol><li>Install it with <code>npm install {package}</code>, where <code>{package}</code> is the plugin's package name. You can install as many plugins as you want; for a complete list of plugins, please <a href="ecosystem.md">click here</a>.</li><li>Optionally, create <code>{data-dir}/config/{ns}.json</code> to customize the plugin's settings, where <code>{ns}</code> is the namespace or plugin name.</li><li>Open or create <code>{data-dir}/config/.plugins</code> and list the plugin's <code>{package}</code> name in it, one per line.</li></ol><p>For example, the text below will load <code>bajo-config</code>, <code>bajo-extra</code>, and <code>bajo-template</code>:</p><pre class="prettyprint source lang-text"><code># .plugin file
bajo-config
bajo-extra
bajo-template
</code></pre><p>If you later decide to disable one or more plugins, you just need to remove them from the <code>.plugins</code> file or place a <code>#</code> hash mark in front of the package name and restart your app.</p><blockquote><p><strong>Warning</strong>: Please do not confuse <code>{package}</code> and <code>{ns}</code>. The plugin package is the name of the JS package listed on npm, while <code>{ns}</code> is the namespace or plugin name, which is basically the camel-cased version of the plugin's package name.</p></blockquote><h3 id="environment-support">Environment Support</h3><p>Configuration file support for different environments is also available. All you need to do is create a <code>{ns}-{env}.json</code> file in your <code>{data-dir}/config</code>, where:</p><ul><li><code>{ns}</code>: the namespace/plugin name</li><li><code>{env}</code>: your desired environment (<code>dev</code> or <code>prod</code>)</li><li>App-wide settings with <code>bajo-{env}.json</code> are also possible.</li></ul><p>Bajo is smart enough to select which config file will be used based on the following order of precedence:</p><ol><li>Use <code>{ns}-{env}.json</code> if the file exists.</li><li>If not, use <code>{ns}.json</code>.</li><li>If that also doesn't exist, then use the plugin's default config values.</li></ol><h3 id="runtime-override">Runtime Override</h3><p>You can easily override ANY key-value pair setting with environment variables and program argument switches. Bajo also supports <a href="https://github.com/motdotla/dotenv">dotenv</a> with a <code>.env</code> file.</p><p>The order of precedence is: environment variable &gt; argument switches &gt; config files &gt; default, built-in values.</p><p>All values (whether they come from environment variables, argument switches, or config files) will be parsed using <a href="https://github.com/ladjs/dotenv-parse-variables">dotenv-parse-variables</a>, so please make sure you visit the repository to fully understand how it works.</p><h4 id="dotenv">dotenv</h4><ul><li>Create or open <code>{project-dir}/.env</code></li><li>Use <code>__</code> (double underscores) as replacement for dots in an object.</li><li><code>DIR__DATA</code>: Sets the <code>{data-dir}</code> data directory.</li><li><code>DIR__TMP</code>: Sets <code>{tmp-dir}</code> temporary directory.</li><li>For every key in <code>{ns|bajo}.json</code>, use its snake-cased, upper-cased version. For example:<ul><li><code>env: 'prod'</code> → <code>ENV=prod</code></li><li><code>log.dateFormat: 'YYYY-MM-DD'</code> → <code>LOG__DATE_FORMAT=YYYY-MM-DD</code></li><li><code>exitHandler: true</code> → <code>EXIT_HANDLER=true</code></li></ul></li><li>To override a plugin's config, prepend every key in the plugin's config with the snake-cased, upper-cased version of the namespace followed by a dot. For example:<ul><li><code>key</code> in <code>myPlugin</code> → <code>MY_PLUGIN.KEY=...</code></li><li><code>key.subKey.subSubKey</code> in <code>myPlugin</code> → <code>MY_PLUGIN.KEY__SUB_KEY__SUB_SUB_KEY=...</code></li></ul></li></ul><p>Example:</p><pre class="prettyprint source lang-text"><code># .env file
ENV=prod
LOG__PRETTY=true
LOG__TIME_TAKEN=true
LANG=id
</code></pre><h4 id="argument-switches">Argument Switches</h4><ul><li>Use switches, for example: <code>node index.js --xxx=one --yyy=two</code></li><li>Use <code>-</code> as the replacement for dots in an object.</li><li><code>--dir-data</code>: Sets the <code>{data-dir}</code> data directory.</li><li><code>--dir-tmp</code>: Sets the <code>{tmp-dir}</code> temporary directory.</li><li>For every key in <code>{ns|bajo}.json</code>, add <code>--</code> prefix. For example:<ul><li><code>env: 'prod'</code> → <code>--env=prod</code></li><li><code>log.dateFormat: 'YYYY-MM-DD'</code> → <code>--log-dateFormat=YYYY-MM-DD</code></li><li><code>exitHandler: true</code> → <code>--exitHandler</code></li></ul></li><li>To override a plugin's config, prepend every key in the plugin's config with the plugin name followed by a colon <code>:</code>. For example:<ul><li><code>key</code> in <code>myPlugin</code> → <code>--myPlugin:key=...</code></li><li><code>key.subKey.subSubKey</code> in <code>myPlugin</code> → <code>--myPlugin:key-subKey-subSubKey=...</code></li></ul></li></ul><p>Example:</p><pre class="prettyprint source lang-bash"><code>$ node index.js --env=prod --log-pretty --log-timeTaken --lang=id
</code></pre><h2 id="system-hook">System Hook</h2><p>A <strong>hook</strong> refers to a mechanism that allows you to inject a custom function to extend Bajo's functionality at specific points. These points are typically predefined by the framework, providing opportunities to execute code before, during, or after a particular operation.</p><h3 id="usage">Usage</h3><p>In Bajo, hooks can be created anywhere very easily. Simply call the <code>runHook</code> method followed by the parameters you want to pass.</p><p>The hook name is always in the form of <a href="global.html#TNsPathPairs">TNsPairs</a>, while its parameters are a rest parameter. This means you can pass any number of parameters to the function, or none at all.</p><p>Example:</p><ul><li><p>In your JavaScript file, add the following code snippet:</p><pre class="prettyprint source lang-javascript"><code>const { runHook } = this.app.bajo
await runHook('main:sayHello', 'Don', 'Meri', { movie: 'Jumbo', year: 2025 })
</code></pre></li><li><p>Go to directory <code>{project-dir}/main/extend/bajo/hook</code>. Create one if it doesn't exist yet.</p></li><li><p>Create file <code>main@say-hello.js</code> in the directory above.</p></li><li><p>Enter these lines:</p><pre class="prettyprint source lang-javascript"><code>async function sayHello (...params) {
  const [mainChar, friend, payload] = params
  console.log(mainChar, friend, payload) // output: Don, Meri, { movie: 'Jumbo', year: 2025 }
}

export default sayHello
</code></pre></li></ul><p>Note the hook name and its associated file name:</p><p><code>main:sayHello</code> → <code>main@say-hello.js</code></p><p>Because a colon (<code>:</code>) is prohibited in a file name, Bajo replaces it with the <code>@</code> symbol.</p><p>During the boot process, Bajo will scan for hook files and load them into the hook list. When your <code>runHook</code> is executed, Bajo will find its related object from the list. If such a hook exists, its function handler will be called.</p><h3 id="anatomy">Anatomy</h3><p>Many times, there are more than one handler listening for a particular hook name. Especially in a framework that uses plugins extensively like Bajo, many plugins can listen to one hook at the same time. This creates a problem with call order.</p><p>To overcome this problem, Bajo gives you the opportunity to set a <code>level</code>. Functions with a lower level will be called earlier. Functions with no level will be assigned level 999 by default.</p><p>Now, change your <code>main@say-hello.js</code> file above to export an object instead of a function:</p><pre class="prettyprint source lang-javascript"><code>const sayHello = {
  level: 10, // &lt;-- will get called early
  handler: async function (...params) {
    const [mainChar, friend, payload] = params
    console.log(mainChar, friend, payload) // output: Don, Meri, { movie: 'Jumbo', year: 2025 }
  }
}
</code></pre><h3 id="caveats">Caveats</h3><p>Hooks give you a lot of flexibility and freedom, but you need to be aware of the following caveats:</p><ul><li>You need to use an <strong>asynchronous</strong> function. Even if your function is synchronous, it will be called as an asynchronous one—and as you know, there is a performance degradation when using asynchronous operations</li><li><strong>Stay away</strong> from using <code>runHook</code> inside a hook! Even though it's possible, your code will become unreadable and messy pretty soon.</li><li>It's hard to trace errors in a hook. Because of its sequential nature, if a handler that's called earlier than yours throws an error, your hook won't be called at all.</li><li>If you use so many plugins that use the hook system so extensively with so many files, your app's boot time can take much longer than it's supposed to.</li></ul><p>My advice is to <strong>use it wisely</strong>. Don't use hooks unless necessary; this will make your app or plugin clean and easy to understand.</p></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><a href="/" class="sidebar-title sidebar-title-anchor">Bajo Framework</a><div class="mobile-nav-links"><div class="navbar-item"><a id="" href="https://bajo.app" target="">Bajo.app</a></div><div class="navbar-item"><a id="" href="https://www.npmjs.com/package/bajo" target="">NPM</a></div><div class="navbar-item"><a id="" href="https://github.com/ardhi/bajo" target="">Github</a></div></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-tutorials"><div>Tutorials</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="tutorial-00-welcome.html">Welcome</a></div><div class="sidebar-section-children"><a href="tutorial-01-getting-started.html">Getting Started</a></div><div class="sidebar-section-children"><a href="tutorial-02-user-guide.html">User Guide</a></div><div class="sidebar-section-children"><a href="tutorial-03-dev-guide.html">Developer Guide</a></div><div class="sidebar-section-children"><a href="tutorial-04-config.html">Config Object</a></div><div class="sidebar-section-children"><a href="tutorial-05-ecosystem.html">Ecosystem</a></div><div class="sidebar-section-children"><a href="tutorial-06-donations.html">Donations</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="App.html">App</a></div><div class="sidebar-section-children"><a href="Bajo.html">Bajo</a></div><div class="sidebar-section-children"><a href="Base.html">Base</a></div><div class="sidebar-section-children"><a href="Err.html">Err</a></div><div class="sidebar-section-children"><a href="Log.html">Log</a></div><div class="sidebar-section-children"><a href="Plugin.html">Plugin</a></div><div class="sidebar-section-children"><a href="Print.html">Print</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-events"><div>Events</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#event:bajo:afterAll%257Bmethod%257D">bajo:afterAll{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterBootComplete">bajo:afterBootComplete</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterBuildCollection">bajo:afterBuildCollection</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:afterCollectHooks">bajo:afterCollectHooks</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:beforeAll%257Bmethod%257D">bajo:beforeAll{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:bajo:beforeBuildCollection">bajo:beforeBuildCollection</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:afterAppletRun">{ns}:afterAppletRun</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:after%257Bmethod%257D">{ns}:after{method}</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:beforeAppletRun">{ns}:beforeAppletRun</a></div><div class="sidebar-section-children"><a href="global.html#event:%257Bns%257D:before%257Bmethod%257D">{ns}:before{method}</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-Helper_Bajo.html">Helper/Bajo</a></div><div class="sidebar-section-children"><a href="module-Helper_Base.html">Helper/Base</a></div><div class="sidebar-section-children"><a href="module-Lib.html">Lib</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#TAppConfigHandler">TAppConfigHandler</a></div><div class="sidebar-section-children"><a href="global.html#TAppEnv">TAppEnv</a></div><div class="sidebar-section-children"><a href="global.html#TAppLib">TAppLib</a></div><div class="sidebar-section-children"><a href="global.html#TBajoDataType">TBajoDataType</a></div><div class="sidebar-section-children"><a href="global.html#TBajoFormatResult">TBajoFormatResult</a></div><div class="sidebar-section-children"><a href="global.html#TBajoFormatType">TBajoFormatType</a></div><div class="sidebar-section-children"><a href="global.html#TLogJson">TLogJson</a></div><div class="sidebar-section-children"><a href="global.html#TLogLevels">TLogLevels</a></div><div class="sidebar-section-children"><a href="global.html#TNsPathPairs">TNsPathPairs</a></div><div class="sidebar-section-children"><a href="global.html#TNsPathResult">TNsPathResult</a></div><div class="sidebar-section-children"><a href="global.html#TPrintOptions">TPrintOptions</a></div><div class="sidebar-section-children"><a href="global.html#boot">boot</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>